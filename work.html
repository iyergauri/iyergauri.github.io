<!DOCTYPE html>
<!--Authors: Connor Schultz, Gauri Iyer, Andy Zhang
    Class: CSE 170, Fall 2017
    Project: Workout app to assist the aging/elderly with maintaining consistent schedule -->

<!--HEAD-->
<html lang="en">
<head>
  <title>Team Crisp</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>


<body>
<!--NAVIGATION BAR
    sources of help: 
      www.w3schools.com/bootstrap/bootstrap_navbar.asp 
      https://stackoverflow.com/questions/19733447/bootstrap-navbar-with-left-center-and-right-aligned-items
--> 
<nav class="navbar navbar-inverse">
  <div class="navbar-header">
    <!--a class="navbar-brand" href="#">Workout App</a-->
  </div>
  <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav navbar-left">
      <!--li><a href="#home">Home</a></li>
      <li><a href="#other">Other</a></li-->
      <li><a href="settings.html">Account Settings</a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="signup.html">Log Out</a></li>
    </ul>
  </div>
</nav>


<!-- HOME PAGE BANNER -->
<div class="jumbotron text-center">
  <h1 class="display-3">Today's Workout</h1>
  <p class="lead">
    <a class="btn btn-success btn-lg" href="./index.html" role="button">Return Home</a>
  </p>
</div>

<!-- exercise -->
<div class="container text center">
<div class="jumbotron text-center">
  <div class="row">
    
    <div class="col-sm-3">
          <img src="./img/Walk.png" class="img-rounded" alt="Lights" style="width:75%">
          <div class=" btn btn-info" data-toggle="modal" data-target="#exerciseInfoModal" data-exercise="Walk">
            <p>Info</p>
          </div>
    </div>
    
    <div class="col-sm-6">
        <h1 class="display-3">WALK</h1>
        <h2 class="display-3">10 minutes</h2>
    </div>
    
    <div class="col-sm-3">
      <p text-align="center">
        <br/>
        <button type="button" id="walk" onclick="timer()" class="btn btn-primary btn-circle btn-lg">
          <h2 id="timeCount">Start Now<br /></h2></button>
      </p>
    </div>
    
  </div>
</div>
</div>


<div class="container text center">
<div class="jumbotron text-center">
  <div class="row">
    
    <div class="col-sm-3">
          <img id="squat-img" src="./img/Squat2.png" class="img-rounded" alt="Lights" style="width:75%">
          <div class=" btn btn-info" data-toggle="modal" data-target="#exerciseInfoModal" data-exercise="Squat">
            <p>Info</p>
          </div>
    </div>
    
    <div class="col-sm-6">
        <h1 class="display-3">SQUATS</h1>
        <h2 class="display-3">10 squats</h2>
    </div>
    
    <div class="col-sm-3">
      <p class="lead">
        <br />
        <button type="button" id="squat" onclick="counter()" class="btn btn-primary btn-circle btn-lg">
          <h2 id="numCount">Start Now<br/></h2></button>
      </p>
    </div>
    
  </div>
</div>
</div>
<!--
<div class="container">             
  <ul class="pager">
    <li class="previous"><a href="./index.html">Previous</a></li>
    <li class="next"><a href="./finish.html">Next</a></li>
  </ul>
</div>
-->
<div class="modal fade" id="exerciseInfoModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel" style="font-size:xx-large; font-weight:bold;">New message</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
         
        </button>
      </div>
      <div class="modal-body">
        <p id="modal-text" style="font-size:x-large">Modal body text goes here.<p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        
      </div>
    </div>
  </div>
</div>
<div>
    <button class="btn btn-primary btn-lg btn-block login-button" onclick="location.href='./finish.html';"> Finish Workout </button>
</div>
<br>
<script type="text/javascript">


//add this into a js file later
$('#exerciseInfoModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var exercise = button.data('exercise') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
 
  modal.find('.modal-title').text(exercise);
  if(exercise == "Squat"){
  modal.find('#modal-text').text("Stand with your arms straight out and with your feet at about shoulder width apart. "+
                    "Keeping your back straight, bend your knees as if you were sitting. " +
                    "Rise back up to a standing position. " +
                    "Repeat this 10 times.");
  }
  if(exercise == "Walk"){
    modal.find('#modal-text').text("Walk at a brisk pace in an open area for 10 minutes");
  }
})

function timer() {
    $("#walk").attr("disabled", true);
    document.getElementById("timeCount").innerHTML = "10:00 left";
    var timeleft = 600;
    var minutes = Math.floor(timeleft/60);
    var seconds = timeleft - minutes*60;
    var downloadTimer = setInterval(function(){
    timeleft--;
    minutes = Math.floor(timeleft/60);
    seconds = timeleft - minutes*60;
    if(seconds < 10)
      seconds = "0"+seconds;
    document.getElementById("timeCount").textContent = minutes + ":" + seconds + " left";
    if(timeleft <= 0){
      clearInterval(downloadTimer);
      document.getElementById("numCount").textContent = "DONE!";
    }
    },1000);
}
function counter() {
    $("#squat").attr("disabled", true);
    document.getElementById("numCount").innerHTML = "10 left";
    var timeleft = 10;
    var imgNum = 0;
    var downloadTimer = setInterval(function(){
      timeleft--;
      document.getElementById("numCount").textContent = timeleft + " left";

      if(timeleft <= 0){
        clearInterval(downloadTimer);
        document.getElementById("numCount").textContent = "DONE!";
      }
    },2000);

    var switchImg = setInterval(function(){
      if(timeleft <= 0)
        document.getElementById("squat-img").src = "./img/Squat1.png";
      else if(imgNum % 2 == 0)
        document.getElementById("squat-img").src = "./img/Squat1.png";
      else 
        document.getElementById("squat-img").src = "./img/Squat2.png";
      
      imgNum++;
    },1000);
}
</script>

</body>
</html>
